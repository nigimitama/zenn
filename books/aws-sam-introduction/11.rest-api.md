---
title: "例：認証つきのREST API"
---

# API キー認証する API

# Cognito 認証する API

AWS Amplify などで静的サイトをホスティングしている場合のバックエンドとなる API を SAM で作る場合、API キーでは（Javascript は簡単に覗けるので）Cognito Userpool で認証することが望ましいです。

## CORS の Preflight 認証

CORS（オリジン間リソース共有）を有効化している場合、メインのリクエストに先立って CORS の設定の有無を探すための preflight という HTTP リクエストが OPTION メソッドで飛んできます。

（参考：[Preflight request (プリフライトリクエスト) - MDN Web Docs 用語集: ウェブ関連用語の定義 | MDN](https://developer.mozilla.org/ja/docs/Glossary/Preflight_request)）

Cognito 認証をしている場合はこの Preflight も認証にパスすることを要求してブロックしてしまうので、preflight は許可するように設定する必要があります。
